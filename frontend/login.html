<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Signin Template for Bootstrap</title>
    
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">


    <!-- Custom styles for this template -->
    <link href="css/signin.css" rel="stylesheet">

  </head>

  <div id="myOnlineCamera">
      <video></video>
      <canvas></canvas>
      <button>Take Photo!</button>
  </div>

  <style>
      #myOnlineCamera video{width:320px;height:240px;margin:15px;float:left;}
      #myOnlineCamera canvas{width:320px;height:240px;margin:15px;float:left;}
      #myOnlineCamera button{clear:both;margin:30px;}
      </style>


<script>

    var videoObj    = { "video": true },
        errBack        = function(error){
            // alert("Video capture error: ", error.code);
        };
    
    // Ask the browser for permission to use the Webcam
    if(navigator.getUserMedia){                    // Standard
        navigator.getUserMedia(videoObj, startWebcam, errBack);
    }else if(navigator.webkitGetUserMedia){        // WebKit
        navigator.webkitGetUserMedia(videoObj, startWebcam, errBack);
    }else if(navigator.mozGetUserMedia){        // Firefox
        navigator.mozGetUserMedia(videoObj, startWebcam, errBack);
    };
    
    function startWebcam(stream){
    
        var myOnlineCamera    = getElementById('myOnlineCamera'),
            video            = myOnlineCamera.querySelectorAll('video'),
            canvas            = myOnlineCamera.querySelectorAll('canvas');
    
        video.width = video.offsetWidth;
        if(navigator.getUserMedia){                    // Standard
        video.src = stream;
        video.play();
    }else if(navigator.webkitGetUserMedia){        // WebKit
        video.src = window.webkitURL.createObjectURL(stream);
        video.play();
    }else if(navigator.mozGetUserMedia){        // Firefox
        video.src = window.URL.createObjectURL(stream);
        video.play();
    };

    // Click to take the photo
    $('#webcam-popup .takephoto').click(function(){
        // Copying the image in a temporary canvas
        var temp = document.createElement('canvas');

        temp.width  = video.offsetWidth;
        temp.height = video.offsetHeight;

        var tempcontext = temp.getContext("2d"),
            tempScale = (temp.height/temp.width);

        temp.drawImage(
            video,
            0, 0,
            video.offsetWidth, video.offsetHeight
        );
// Resize it to the size of our canvas
canvas.style.height    = parseInt( canvas.offsetWidth * tempScale );
        canvas.width        = canvas.offsetWidth;
        canvas.height        = canvas.offsetHeight;
        var context        = canvas.getContext("2d"),
            scale        = canvas.width/temp.width;
        context.scale(scale, scale);
        context.drawImage(bigimage, 0, 0);
    });
};

</script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
